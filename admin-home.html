<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Database Test Page</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background-color: #f4f4f4; }
  button { padding: 5px 10px; margin: 2px; cursor: pointer; }
  .modal { 
      display: none; 
      position: fixed; 
      top: 20%; left: 50%; transform: translateX(-50%); 
      background: #fff; 
      padding: 20px; 
      border: 1px solid #ccc; 
      z-index: 1000; 
      width: 300px;
  }
  label { display: block; margin-top: 10px; }
  input, select { width: 100%; padding: 5px; margin-top: 5px; }
</style>
</head>
<body>

<h2>Users</h2>
<button onclick="openAddUser()">Add User</button>
<table>
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Password</th>
      <th>Role</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody id="usersTable"></tbody>
</table>

<h2>Forms</h2>
<button onclick="openAddForm()">Add Form</button>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Status</th>
      <th>Created At</th>
      <th>Questions Number</th>
      <th>Edit</th>
      <th>Toggle Status</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody id="formsTable"></tbody>
</table>

<!-- Add User Modal -->
<div id="addUserModal" class="modal">
  <h3>Add User</h3>
  <label>Username:</label>
  <input type="text" id="newUsername">
  <label>Email:</label>
  <input type="email" id="newEmail">
  <label>Password:</label>
  <input type="password" id="newPassword">
  <label>Role:</label>
  <select id="newRole">
    <option value="admin">Admin</option>
    <option value="user">User</option>
  </select>
  <button onclick="addUser(
    document.getElementById('newUsername').value,
    document.getElementById('newEmail').value,
    document.getElementById('newPassword').value,
    document.getElementById('newRole').value
  )">Add</button>
  <button onclick="document.getElementById('addUserModal').style.display='none'">Cancel</button>
</div>

<!-- Edit User Modal -->
<div id="editUserModal" class="modal">
  <h3>Edit User</h3>
  <label>Username:</label>
  <input type="text" id="editUsername">
  <label>Email:</label>
  <input type="email" id="editEmail">
  <label>Password:</label>
  <input type="password" id="editPassword">
  <label>Role:</label>
  <select id="editRole">
    <option value="admin">Admin</option>
    <option value="user">User</option>
  </select>
  <button onclick="saveEditingUser()">Save</button>
  <button onclick="document.getElementById('editUserModal').style.display='none'">Cancel</button>
</div>

<!-- Add Form Modal -->
<div id="addFormModal" class="modal">
  <h3>Add Form</h3>
  <label>Title:</label>
  <input type="text" id="formTitle">
  <label>Description:</label>
  <input type="text" id="formDescription">
  <label>Status:</label>
  <select id="formStatus">
    <option value="active">Active</option>
    <option value="inactive">Inactive</option>
  </select>
  <button onclick="addForm()">Add</button>
  <button onclick="document.getElementById('addFormModal').style.display='none'">Cancel</button>
</div>

<!-- Edit Form Modal -->
<div id="editFormModal" class="modal">
  <h3>Edit Form</h3>
  <label>Title:</label>
  <input type="text" id="editFormTitle">
  <label>Description:</label>
  <input type="text" id="editFormDescription">
  <label>Status:</label>
  <select id="editFormStatus">
    <option value="active">Active</option>
    <option value="inactive">Inactive</option>
  </select>
  <button onclick="saveEditingForm()">Save</button>
  <button onclick="document.getElementById('editFormModal').style.display='none'">Cancel</button>
</div>

<script src="JS/admin.js"></script>
<script>
  // Initial load
  loadDatabase();
  renderUsers();
  renderForms();
</script>

</body>
</html>
