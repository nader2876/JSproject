<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Active Forms</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

   <link rel="stylesheet" href="./Active_forms.css">
    
</head>

<body>

    <div class="container">
        <h1 class="page-title">Active Forms</h1>

        <div class="row justify-content-center">
            <div class="col-lg-10">

                <!-- Card 1 -->
                <div class="form-card">
                    <div class="card-content">
                        <h3 class="card-title">Orange Coding Academy-JS Test</h3>
                        <p class="card-description">
                            JavaScript test questions provided by Orange to assess your understanding of core concepts
                            and real-world problem-solving skills.
                        </p>
                    </div>
                    <div>
                        <button class="btn btn-begin">Begin</button>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="form-card">
                    <div class="card-content">
                        <h3 class="card-title">Microsoft-Automation Test</h3>
                        <p class="card-description">
                            A quick assessment designed to measure your understanding of automation concepts, workflows,
                            and problem-solving skills.
                        </p>
                    </div>
                    <div>
                        <button class="btn btn-begin">Begin</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // Load forms from localStorage db
  const db = JSON.parse(localStorage.getItem("db")) || {};
  const forms = db.forms || [];

  const container = document.querySelector(".col-lg-10"); // container where form cards go

  if (forms.length === 0) {
    Swal.fire({
      icon: "info",
      title: "No Forms",
      text: "No forms are available at the moment."
    });
  }

  // Clear existing cards (optional if hardcoded HTML exists)
  container.innerHTML = "";

  forms.forEach(form => { if(form.status=='active'){
    const card = document.createElement("div");
    card.className = "form-card"; // keep your CSS class
    card.innerHTML = `
      <div class="card-content">
        <h3 class="card-title">${escapeHtml(form.title)}</h3>
        <p class="card-description">
          ${escapeHtml(form.description || "No description provided.")}
        </p>
      </div>
      <div>
        <button class="btn btn-begin" data-title="${escapeHtml(form.title)}">Begin</button>
      </div>
    `;
    container.appendChild(card);
 } });

  // Delegate click to all Begin buttons
  container.addEventListener("click", (ev) => {
    const btn = ev.target.closest("button.btn-begin");
    if (!btn) return;
    const title = btn.getAttribute("data-title");
    localStorage.setItem("selectedTestTitle", title);
    window.location.href = "Answer_Active_form.html"; // navigate to questions page
  });

  function escapeHtml(str) {
    if (!str) return "";
    return String(str).replace(/[&<>"']/g, function(m) {
      return {"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m];
    });
  }
</script>

</body>

</html>